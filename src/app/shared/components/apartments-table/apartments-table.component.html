@if (apartmentsList$) {
    <div class="card">
        <p-table
        #dt
        [value]="(apartmentsList$ | async) ?? []"
        dataKey="_id"
        [rows]="10"
        [rowsPerPageOptions]="[10, 25, 50]"
        [paginator]="true"
        [globalFilterFields]="['_id', 'Lamas_name', 'Lamas_code', 'year', '3 rooms apartments', 'average price (NIS) 3 rooms apartments', '4+ rooms apartments', 'average price (NIS) 4+ rooms apartments']"
        [tableStyle]="{ 'min-width': '75rem' }"
        >
        <ng-template #caption>
            <div class="flex">
                <p-iconfield iconPosition="left" class="ml-auto">
                    <p-inputicon>
                        <i class="pi pi-search"></i>
                    </p-inputicon>
                    <input pInputText type="text" (input)="onSearch($event)" placeholder="Search keyword" />
                </p-iconfield>
            </div>
        </ng-template>
        <ng-template #header>
            <tr>
                <th style="width:12%">Apartment ID</th>
                <th style="width:22%">Lamas name</th>
                <th style="width:12%">Lamas code</th>
                <th style="width:12%">Year</th>
                <th style="width:12%">3 rooms apartments</th>
                <th style="width:12%">Average price (NIS) 3 rooms apartments</th>
                <th style="width:12%">4+ rooms apartments</th>
                <th style="width:12%">Average price (NIS) 4+ rooms apartments</th>
            </tr>
            <tr>
                <th>
                    <p-columnFilter type="text" field="_id" placeholder="Search by ID" ariaLabel="Filter ID"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="Lamas_name" placeholder="Search by name" ariaLabel="Filter Name"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="Lamas_code" placeholder="Search by code" ariaLabel="Filter Code"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="year" placeholder="Search by year" ariaLabel="Filter Year"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="3 rooms apartments" placeholder="Search by 3 rooms" ariaLabel="Filter 3 Rooms"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="average price (NIS) 3 rooms apartments" placeholder="Search by average price" ariaLabel="Filter Price"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="4+ rooms apartments" placeholder="Search by 4+ rooms" ariaLabel="Filter 4+ Rooms"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="average price (NIS) 4+ rooms apartments" placeholder="Search by average price" ariaLabel="Filter Price"></p-columnFilter>
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-apartment>
            <tr>
                <td>{{ apartment._id }}</td>
                <td>{{ apartment.Lamas_name }}</td>
                <td>{{ apartment.Lamas_code }}</td>
                <td>{{ apartment.year }}</td>
                <td>{{ apartment['3 rooms apartments'] }}</td>
                <td>{{ apartment['average price (NIS) 3 rooms apartments'] }}</td>
                <td>{{ apartment['4+ rooms apartments'] }}</td>
                <td>{{ apartment['average price (NIS) 4+ rooms apartments'] }}</td>
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="8">No apartments found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>

} @else {
    no data
}