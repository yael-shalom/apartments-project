@if (apartmentsList$) {
<div class="card">
    <p-table #dt [value]="(apartmentsList$ | async) ?? []" dataKey="_id" [rows]="10" [rowsPerPageOptions]="[5, 10, 25]"
        [paginator]="true"
        [globalFilterFields]="['_id', 'Lamas_name', 'Lamas_code', 'year', '3 rooms apartments', 'average price (NIS) 3 rooms apartments', '4+ rooms apartments', 'average price (NIS) 4+ rooms apartments']"
        [tableStyle]="{ 'min-width': '75rem' }">
        <ng-template #caption>
            <div class="flex">
                <p-iconfield iconPosition="left" class="ml-auto">
                    <p-inputicon>
                        <i class="pi pi-search"></i>
                    </p-inputicon>
                    <input pInputText type="text" (input)="onSearch($event)" placeholder="Search keyword" />
                </p-iconfield>
            </div>
        </ng-template>
        <ng-template #header>
            <tr>
                <th style="width:12%">{{ apartmentFieldsLabels._id }}</th>
                <th style="width:22%">{{ apartmentFieldsLabels.Lamas_name }}</th>
                <th style="width:12%">{{ apartmentFieldsLabels.Lamas_code }}</th>
                <th style="width:12%">{{ apartmentFieldsLabels.year }}</th>
                <th style="width:12%">{{ apartmentFieldsLabels['3 rooms apartments'] }}</th>
                <th style="width:12%">{{ apartmentFieldsLabels['average price (NIS) 3 rooms apartments'] }}</th>
                <th style="width:12%">{{ apartmentFieldsLabels['4+ rooms apartments'] }}</th>
                <th style="width:12%">{{ apartmentFieldsLabels['average price (NIS) 4+ rooms apartments'] }}</th>
            </tr>
            <tr>
                <th>
                    <p-columnFilter type="text" field="_id" [placeholder]="apartmentFieldsLabels._id"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels._id"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="Lamas_name" [placeholder]="apartmentFieldsLabels.Lamas_name"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels.Lamas_name"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="Lamas_code" [placeholder]="apartmentFieldsLabels.Lamas_code"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels.Lamas_code"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="year" [placeholder]="apartmentFieldsLabels.year"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels.year"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="3 rooms apartments" [placeholder]="apartmentFieldsLabels['3 rooms apartments']"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels['3 rooms apartments']"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="average price (NIS) 3 rooms apartments"
                        [placeholder]="apartmentFieldsLabels['average price (NIS) 3 rooms apartments']"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels['average price (NIS) 3 rooms apartments']"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="4+ rooms apartments" [placeholder]="apartmentFieldsLabels['4+ rooms apartments']"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels['4+ rooms apartments']"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="average price (NIS) 4+ rooms apartments"
                        [placeholder]="apartmentFieldsLabels['average price (NIS) 4+ rooms apartments']"
                        [ariaLabel]="'סינון לפי ' + apartmentFieldsLabels['average price (NIS) 4+ rooms apartments']"></p-columnFilter>
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-apartment>
            <tr>
                <td>{{ apartment._id }}</td>
                <td>{{ apartment.Lamas_name }}</td>
                <td>{{ apartment.Lamas_code }}</td>
                <td>{{ apartment.year }}</td>
                <td>{{ apartment['3 rooms apartments'] }}</td>
                <td>{{ apartment['average price (NIS) 3 rooms apartments'] }}</td>
                <td>{{ apartment['4+ rooms apartments'] }}</td>
                <td>{{ apartment['average price (NIS) 4+ rooms apartments'] }}</td>
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="8">לא נמצאו דירות.</td>
            </tr>
        </ng-template>
    </p-table>
</div>

} @else {
no data
}